<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Friend Finder Survey</title>

	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

	<!-- JQuery -->
	<script
	src="https://code.jquery.com/jquery-3.2.1.min.js"
	integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	crossorigin="anonymous"></script>

	<!-- Bootstrap -->
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

	<!-- Google Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,700">

	<!-- from bootstrap-long-multi-step-form -->
	<link rel="stylesheet" href="assets/css/form-elements.css">
    <link rel="stylesheet" href="assets/css/media-queries.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/main.css">
   

</head>

<body>

<!-- Top menu -->
		<nav class="navbar navbar-inverse" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#top-navbar-1">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="top-navbar-1">
					<ul class="nav navbar-nav navbar-right">
						<li>
                        	<a href="/">Home </a>
	                    </li>
						<li>
                        	<a href="/survey">Find a Friend </a>
	                    </li>
	                    <li>
	                    	<a href="/api/friends"> API Friends List </a>
	                    </li>
	                    <li>
	                    	<a href="https://github.com/sundropgold/FriendFinder"> GitHub Repository</a>
	                    </li>
					</ul>
				</div>
			</div>
		</nav>
        
        <!-- Description -->
		<div class="description-container">
	        <div class="container">
	        	<div class="row">
	                <div class="col-sm-12 description-title">
	                    <h1>Friend Finder Survey</h1>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-sm-12 description-text">
	                    <div class="divider-1">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</div>
	                </div>
	            </div>
			</div>
		</div>
		
		<br/>
		<br/> 

		<!-- Multi Step Form -->
		<div class="msf-container">
	        <div class="container">
	        	<div class="row">
	                <div class="col-sm-12 msf-title">

	                    <p>Fill out each question with a response from a scale of 1 (strongly disagree/negative) to 5 (strongly agree/positive). Please complete the form in its entirety to get access to our friend finding magic. If you wish to omit your name and photo, a default name and photo will be chosen for you!</p>

	                </div>
	            </div>

	            <hr/>
	            <hr/>

	            <div class="row">
	                <div class="col-sm-12 msf-form">
	                    
	                    <form role="form" action="" method="post" class="form-inline" id="friendForm">
	                    	
	                    	<fieldset>
	            				<h4>About You</h4>
	            				<div class="form-group">
				                    <label for="name">Name:</label><br>
				                    <input type="text" name="name" class="name form-control" id="name" required>
				                </div>
				               
	            			</fieldset>

	            			<br/>
	            			
	            			<fieldset>
	            				<h4>Link to Profile Picture</span></h4>
	            				<div class="form-group">
				                    <label for="profile-picture">Profile Picture (image url link):</label><br>
				                    <input type="text" name="profilepic" class="profilepic form-control" id="profilepic" required>
				                </div>

	            			</fieldset>

	            			<br/>
	            			
	            			<fieldset>
	            				<h4>Question 1</h4>
				                <div class="q1">
				                	<p>How do you feel about pineapples on pizza?</p>
									
									<select data-placeholder="" class="chosen-select" id="q1">
										<option value="">-- select --</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>
	            				
	            			</fieldset>

							<br/>

	            			<fieldset>
	            				<h4>Question 2</h4>
	            				<div class="q2">
									<p>Do you support Donald Trump?</p>
					                <select data-placeholder="" class="chosen-select" id="q2">
										<option value="">-- select --</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>
	            				
	            			</fieldset>

							<br/>

	            			<fieldset>
	            				<h4>Question 3</h4>
	            				<div class="q3">
									<p>How do you feel about horoscopes/zodiacs?</p>
					                <select data-placeholder="" class="chosen-select" id="q3">
										<option value="">-- select --</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>
	            				
	            			</fieldset>

							<br/>

	            			<fieldset>
	            				<h4>Question 4</h4>
	            				<div class="q4">
									<p>How often and enthusiastically use memes?</p>
					                <select data-placeholder="" class="chosen-select" id="q4">
										<option value="">-- select --</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>

	            			</fieldset>

	            			<br/>

	            			<fieldset>
	            				<h4>Question 5</h4>
	            				<div class="q5">
									<p>If there were two guys on the moon and one of them killed the other with a rock, would that be fucked up or what?</p>
					                <select data-placeholder="" class="chosen-select" id="q5">
										<option value="">-- select --</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>
	            				
	            			</fieldset>

	            			<br/>

	            			<fieldset>
	            				<h4>Question 6</h4>
	            				<div class="q6">
									<p>It's around 3AM at night (yes, at night), and you're up watching some funny video with your friends. It's been awhile since you've moved from your bed, but suddenly this creeping dread settles in your stomach. A few minutes later, you register that the metaphorical creeping dread is smoke! Smoke - as in FIRE! Fire in the hole!! Because you were so immersed in your video, you don't have much time to get out of your place anymore. You barely escape with a breath, but just as you've crossed out the front door, you realize - oh dear!! I've forgotten my dear (possibly hypothetical) pet. Would you go back inside the flaming, burning, hell heat for your pet?</p>
					                <select data-placeholder="" class="chosen-select" id="q6">
										<option value="">-- select --</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>
	            				
	            			</fieldset>

	            			<br/>

	            			<fieldset>
	            				<h4>Question 7</h4>
	            				<div class="q7">
									<p>Do you think Gangnam Style deserved to be booted from its most played title on Youtube?</p>
					                <select data-placeholder="" class="chosen-select" id="q7">
										<option value="">-- select --</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>
	            				
	            			</fieldset>

	            			<br/>

	            			<fieldset>
	            				<h4>Question 8</h4>
	            				<div class="q8">
									<p>Do you think Shrek 3 was ultimately inconsequential and unfunny in the whole overarching movie franchise and story of Shrek?</p>
					                <select data-placeholder="" class="chosen-select" id="q8">
										<option value="">-- select --</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>		            		
	            			</fieldset>

	            			<br/>

	            			<fieldset>
	            				<h4>Question 9</h4>
	            				<div class="q9">
									<p>Do you like pina coladas? Getting caught in the rain? Are you not into yoga? Do you have half a brain?</p>
					                <select data-placeholder="" class="chosen-select" id="q9">
										<option value="">-- select --</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>
	            				
	            			</fieldset>

	            			<br/>

	            			<fieldset>
	            				<h4>Question 10</h4>
	            				<div class="q10">
									<p>You're in a busy coffeeshop, and you've finally gotten yourself a nice table next to a charger outlet. This coffeeshop is located in the city, and as we all know, you never leave your things alone in the city. You plan on staying there for the rest of the day (at least 5 hours) to do your homework (if you thought Javascript alone was bad, oh boy). As it turns out, an hour in and a big class of coffee downed, you really need to use the bathroom. You've been eyeing the bathroom for at least thirty minutes now, but the single-stall bathroom line's always been stacked to at least five people. Right now, the coffeeshop is still very busy, and there are people eyeing your very perfect table, but you really really really need the bathroom, and just for this moment - no bathroom line. Do you leave your table for the vultures?</p>
					                <select data-placeholder="" class="chosen-select" id="q10">
										<option value="">-- select --</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>

	            			</fieldset>
	                    	
	                    	<br/>

	                    	<button type="submit" class="btn" id="submitForm">Submit</button>

	                    </form>
	                    
	                </div>
	            </div>
			</div>
		</div>

		<!-- - - - - - - - - - - - - JAVASCRIPT LOGIC - - - - - - - - - - -->
		
		<!-- <script type="text/javascript" src="assets/js/survey.js"></script> -->

		<script type="text/javascript">

			$(".modal").hide();
			
			function validateForm(){
				// function for form validation

				var isValid = false;

				$('.chosen-select').each(function(){

					if ($(this).val() === "" || $(this).val() === NaN) {

						isValid = false;

					}

					else {
						isValid = true;
					}
				});

				return isValid;
			};

			// ---------- SUBMIT BUTTON CLICK ----------

			$('#submitForm').on("click", function(event) {

				// prevent page refresh
				event.preventDefault();

				// var validate = validateForm();

				// if (validate == true) {

					var animal = ["Tiger", "Rabbit", "Bee", "Aardvark", "Whale", 
								"Penguin", "Lion", "Cat", "Dragon", "Unicorn",
								"Hippogriff", "Dolphin", "Shark", "Bear", "Mantis",
								"Pig", "Cow", "Chicken", "Sheep", "Antelope",
								"Alligator", "Goat", "Snake", "Fish", "Lizard",
								"Peacock", "Stingray", "Octopus", "Gecko", "Armadillo", 
								"Hare", "Dog", "Dinosaur", "Pidgeon", "Crow",
								"Polar Bear", "Leopard", "Cheetah", "Puma", "Panda"
								];

					var r = Math.floor(Math.random() * 40);

					var newFriend = {
						name:$("#name").val().trim(),
						photo:$("#profilepic").val().trim(),
						score:[
							$('select#q1').val(),
							$('select#q2').val(),
							$('select#q3').val(),
							$('select#q4').val(),
							$('select#q5').val(),
							$('select#q6').val(),
							$('select#q7').val(),
							$('select#q8').val(),
							$('select#q9').val(),
							$('select#q10').val()
						]
					}

					// alternate validation

					if (newFriend.name == null || newFriend.name == "") {
						// set an anonymous handle if no name is input
						newFriend.name = "Mysterious " + animal[r];
					}

					if (newFriend.photo == null || newFriend.photo == "") {
						// set default portrait
						newFriend.photo = "https://placeimg.com/200/200/tech?t=1500404419405";
					}

					for (var i = 0; i < newFriend.score.length; i++) {
					// set all NaN input to 0

						if (isNaN(newFriend.score[i]) == true || newFriend.score[i] == '') {
							newFriend.score[i] = 0;
						}
					 parseInt(newFriend.score[i]);
					}

					$.post("/api/friends", newFriend).done(function(data){

						// reset values back to blank
						$('select#q1').val("");
						$('select#q2').val("");
						$('select#q3').val("");
						$('select#q4').val("");
						$('select#q5').val("");
						$('select#q6').val("");
						$('select#q7').val("");
						$('select#q8').val("");
						$('select#q9').val("");
						$('select#q10').val("");

						var bfName = data.name;
						var bfPhoto = data.photo;

						// console.log("bf: " + bfName + "\n" + bfPhoto);

						alert("Friend Finder profile submitted!");

						// - - - - - - MODAL - - - - - - //

						// get modal
						var modal = $("#myModal");

						$(modal).show();

						// create modal here
						$(modal).html(
							'<div id="modal-content">' +
							'<span class="close">&times;</span>' +
		
							'<h1>Best Match</h1>' +
			
							'<h3 id="matchName">' + bfName + '</h3>' +

							'<img id="matchImg" src="' + bfPhoto + '"/>' +
							'</div>'
							);

						// Get the <span> element that closes the modal
						var span = document.getElementsByClassName("close")[0];
						
						// When the user clicks on <span> (x), close the modal

						$(span).on("click", function(){
							$('#myModal').hide();
						});

						// When the user clicks anywhere outside of the modal, close it

						$(window).on("click", function(){
							if (event.target == modal) {
						        $('#myModal').hide();
						    }
						});

					}); // end post

				// }

				// else {
				// 	alert("Please complete the form.");
				// }

				});


		</script>

		<!-- - - - - - - - - - - - MODAL POP UP WINDOW  - - - - - - - - - - -->

		<div class="modal" id="myModal">

			<!-- <span class="close">&times;</span>
		
			<h1>Best Match</h1>
			
			<h3 id="matchName"></h3>

			<img src="" id="matchImg"/> -->

		</div>
	

</body>
</html>